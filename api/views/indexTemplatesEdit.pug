doctype html
head
  meta(charset='UTF-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title Just Links
  link(rel='stylesheet' href='/css/style2.css')
  link(rel='stylesheet' href='/css/editMode.css')
  link(rel='stylesheet' href='/css/icofont/icofont.min.css')
  script(src='/js/MiniMasonry.js-master/build/minimasonry.min.js')
  script(type='module' src='/js/editMode.js')
  script(type='module' src='/js/scripts3.js')
  script(src='/js/search.js')
  script(type='module' src='/js/sidepanel.js')
  script(type='module' src='/js/functions.mjs')
  script(type='module' src='/js/styles.js')

body(class=mode data-desk= escritorio)
include includes/header.pug
.container
  .skeleton-loader
    .tabsket
      button.tablink.skeleton
      button.tablink.skeleton
      button.tablink.skeleton
      button.tablink.skeleton
    .tabcontentsket
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
      .linksket
        img.skeleton(src='')
        a.skeleton
        div
          span
    .sidepanelsket
      .gridPanel
        div.header.skeleton
      .gridPanel
        .imgHolder.skeleton
      .gridPanel
        .linkInfosket.skeleton
        .linkInfosket.skeleton
        .linkInfosket.skeleton
        .linkInfosket.skeleton
      .gridPanel
        .textHolder.skeleton

  div(id=escritorio + 'Cols' class='cuerpoInt' data-id='columns')
    if columnas.length === 0
      .tab
      div(id='edit' + escritorio + 'default', class='tabcontent', orden='0')
        div(class='columna' id=escritorio + 'default', data-db='')
        include includes/sidepanel.pug
    else
      .tab
        - var contador = {}
        each val, index in columnas
          - var item = val.name
          if contador.hasOwnProperty(item)
            - var numero = contador[item] + 1
            - contador[item] = numero
            button.tablinks.envolt(id=escritorio + val.name + numero, class=index === 0 ? 'defaultOpen' : undefined, orden=`${val.order}`, data-db=`${val._id}`)= val.name
          else 
            - contador[item] = 1
            button.tablinks.envolt(id=escritorio + val.name, class=index === 0 ? 'defaultOpen' : undefined, orden=`${val.order}`, data-db=`${val._id}`)= val.name
      - var contadortb = {}
      each val in columnas
        - var item = val.name
        if contadortb.hasOwnProperty(item)
          - var numero = contadortb[item] + 1
          - contadortb[item] = numero
          div(id='edit' + escritorio + val.name + numero, class='tabcontent', orden=`${val.order}`)
            div(class='columna' id=escritorio + val.name + numero, data-db=`edit${val._id}`)
              each link in links
                if link.idpanel == val._id
                  .link(id=`${link._id}` orden= `${link.orden}`)
                    img(src=`${link.imgURL}`)
                    a(href= `${link.URL}` target='_blank' title= `${link.name}`)
                      span.title #{link.name}
                      span.description #{link.description}
                    .lcontrols
                      span.icofont-external
              if val.vacio == true
                .link(orden='0')
          //- include includes/sidepanel.pug
        else
          - contadortb[item] = 1
          div(id='edit' + escritorio + val.name, class='tabcontent', orden=`${val.order}`)
            div(class='columna' id=escritorio + val.name, data-db=`edit${val._id}`)
              each link in links
                if link.idpanel == val._id
                  .link(id=`${link._id}` orden= `${link.orden}`)
                    img(src=`${link.imgURL}`)
                    a(href= `${link.URL}` target='_blank' title= `${link.name}`)
                      span.title #{link.name}
                      span.description #{link.description}
                    .lcontrols
                      span.icofont-external
              if val.vacio == true
                .link(orden='0')
      include includes/sidepanel.pug
include includes/forms.pug
//- script(src='/js/Sortable-master/Sortable.min.js')